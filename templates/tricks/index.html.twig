{% extends 'layouts/base.html.twig' %} {% block title %}'Best tricks learing!'{%
endblock %} {% block body %}
<!-- ======================================================================= -->
<!-- Navigation ici -->
<!-- ======================================================================= -->
{{ include("layouts/partials/_nav.html.twig") }}
<!-- ======================================================================= -->
<!-- Cover -->
<!-- ======================================================================= -->
<div class="row">
  <div class="col-md-12 border text-center">
    <img
      src=" {{ asset('/uploads/4ae9be30a99889f9d4b7769f100e6a63.jpg') }}"
      class="img-fluid. max-width: 100%"
      alt="Image de presentation"
    />
  </div>
  <div class="overlay">
    <p class="overlay-content overlay">
      "The Best trick ever" fleche dernier trick
    </p>
  </div>
</div>

<div class="row text-center">
  <a href="#bas"
    ><button type="button" class="btn btn-outline-secondary mb-2">
      Arrow
    </button></a
  >
</div>
<!-- ======================================================================= -->
<!-- Card Model-->
<!-- Content [Listing des articles] -->
<!-- ======================================================================= -->
<div class="container-xxl mt-2">
  {% if tricks|length > 0 %}
  <a name="haut">...</a>
  {% for row in tricks|batch(5)%}
  <div class="row mt-5 mb-5">
    {% for trick in row %}
    <div class="col-md-4 mt-4 mb-4">
      <article class="trick bg-white rounded shadow">
        <div class="mw-100 overflow-hidden rounded-top">
          <a href="{{ path('app_tricks_show', { slug: trick.slug }) }}">
            {# {{ foo ? "yes" : "no" }} #}
            <img
              src="{{ trick.photos is not empty ? asset('/uploads/'~ trick.photos.first.name) : asset('/build/images/placeholder.29b24e4f.jpg')|imagine_filter('squared_card')}}"
              alt="{{ trick.nom }}"
              class="w-100"
              height="250"
            />
          </a>
        </div>

        <!-- ============================================================= -->
        <!-- Card Buttons -->
        <!-- ============================================================= -->
        <div class="border flex-row">
          <div>
            <a
              href="{{ path('app_tricks_edit', { slug: trick.slug }) }}"
              class="btn btn-primary"
              >Edit
            </a>
          </div>

          <form
            method="post"
            action="{{ path('app_tricks_delete', { slug: trick.slug }) }}"
            onsubmit="return confirm('êtes-vous sûre de vouloir supprimer?');"
          >
            {#} isCsrfTokenValid('trick_deletion_' . $trick->getId() {#}
            <input
              type="hidden"
              name="_token"
              value="{{ csrf_token('trick_deletion_' ~ trick.id) }}"
            />
            <button class="btn btn-primary">Supprimer</button>
          </form>
        </div>
      </article>
    </div>
    {% endfor %}
  </div>
  {% endfor %} {% else %}
  <p class="h1 mt-5 text-center">
    No tricks yet <a href=" {{ path('app_tricks_create') }}">Be the first! </a>
  </p>
  {% endif %}

  <a name="bas">...</a>
  <!-- ===================================================================== -->
  <!-- LOAD -->
  <!-- ===================================================================== -->
  {% set pages = (total/limit)| round(0, 'ceil') %} {% if total >= 15 %}
  <a href="{{ (page < pages ) ? '?page=' ~  (page + 1) : '' }}"
    >{#Page actuel +1 limite au nombre de pages max #}
    <button type="button" class="btn btn-secondary btn-lg">LOAD MORE</button>
  </a>
  {% endif %}

  <!-- ======================================================================= -->
  <!-- Composant de Pagination -->
  <!-- ======================================================================= -->

  {# boucle 1 au derniere page calculer le nbr de page requis 58:36#} {# Astuce
  < expression dans href 1 disable href précedent et ~> disable href suivant #}

  <article class="row border">
    {% if tricks|length > 0 %}
    <div class="col-md-4 mt-2">
      <nav aria-label="Page navigation example">
        {% set pages = (total/limit)| round(0, 'ceil') %}
        <ul class="pagination">
          <li class="page-item {{ page == 1 ? 'disable' : '' }}">
            <a
              class="page-link"
              href="{{ (page > 1) ? '?page=' ~  (page - 1) : '' }}"
              >Precedent</a
            >
          </li>

          {% for item in 1.. pages %}

          <li class="page-item">
            <a class="page-link" href="?page{{ item }}">{{ item }}</a>
          </li>

          {% endfor %}

          <li class="page-item {{ page == pages ? 'disable' : '' }}">
            <a
              class="page-link"
              href="{{ (page < pages ) ? '?page=' ~  (page + 1) : '' }}"
              >Suivant</a
            >
          </li>
        </ul>
      </nav>
    </div>
    {% endif %}
    <div class="row text-center">
      <a href="#haut"
        ><button type="button" class="btn btn-outline-secondary mb-2">
          Arrow
        </button></a
      >
    </div>
  </article>
</div>
{% endblock %}
